================================================================================
                   Fun-ASR-Nano 8kHz 电话频道微调 - 配置对齐文档
================================================================================

本实验的所有配置都基于预训练模型微调，为了让用户清晰了解配置的修改、对齐和默认值，
我们提供了5份完整的配置对齐文档。

📚 文档清单（按推荐阅读顺序）
================================================================================

【第一步】- 快速导航与入门 (推荐首先阅读)
────────────────────────────────────────────────────────────────────────────
  📌 README_CONFIG.md (7.0K, 233行)
  
     用途: 配置对齐文档的导航和快速参考
     内容:
       • 4份文档的快速导航表
       • 按场景推荐使用哪份文档
       • 关键改动一览
       • 7步训练前快速检查
       • 配置文件说明（main, stage1等）
       • 常见问题速查
     
     适合: 所有人首先阅读
     阅读时间: 5分钟
     何时使用: 开始训练前快速确认

────────────────────────────────────────────────────────────────────────────

【第二步】- 关键改动速览 (适合快速了解)
────────────────────────────────────────────────────────────────────────────
  ⚡ QUICK_CONFIG_DIFF.md (7.9K, 264行)
  
     用途: 展示所有关键的配置改动与差异
     内容:
       • 视觉化对比格式 (Pretrained vs config_8k_telephone vs stage1)
       • 10个关键模块的完整对比
       • 🔴 关键改动 (CRITICAL) - Encoder、学习率、DeepSpeed等
       • 🟡 重要修改 (MODIFIED) - Epochs、Weight Decay、SpecAug等
       • 🟠 新增参数 (NEW) - SpecAugmentation及其配置
       • ⚪ 省略参数 (OMITTED) - 使用代码默认值
       • 两个Stage的详细对比 (stage1 vs main config)
       • 训练影响总结表
       • 预训练检查清单
     
     适合: 想快速了解改了什么、为什么改
     阅读时间: 5-10分钟
     何时使用: 第一次了解配置、修改参数前

────────────────────────────────────────────────────────────────────────────

【第三步】- 表格详细对比 (适合查询特定参数)
────────────────────────────────────────────────────────────────────────────
  📊 CONFIG_COMPARISON_TABLE.md (8.9K, 237行)
  
     用途: 完整的参数对比表，按模块分类
     内容:
       • 快速查看表: 所有参数的Pretrained vs Fine-tuning对比
       • 分类统计: CRITICAL/MODIFIED/NEW/OMITTED 参数统计
       • 模块化分类表:
         - 模型架构 - 冻结/可训练
         - 优化器与学习率
         - 训练策略
         - 数据处理
       • 配置使用指南 (何时用哪个config)
       • 配置验证清单 (训练前10项检查)
       • 预期训练效果表
       • 常见问题与答案
     
     适合: 需要查看特定参数、按模块学习
     阅读时间: 15-20分钟
     何时使用: 查询特定参数、调试参数

────────────────────────────────────────────────────────────────────────────

【第四步】- 按场景详细指南 (适合精准指导)
────────────────────────────────────────────────────────────────────────────
  📖 CONFIG_ALIGNMENT_GUIDE.md (9.8K, 347行)
  
     用途: 按不同场景提供详细的配置和使用指南
     内容:
       • 5种场景的完整指导流程:
         - 快速开始训练
         - 修改学习率或超参数
         - 理解Stage1和Main的区别
         - 调试训练问题
         - 定制化配置
       • 关键概念速查表
       • 常见错误列表与纠正方案 (5个最常见的错误)
       • 训练前详细检查清单 (10项)
       • 快速启动命令示例
       • 深入学习资源推荐
     
     适合: 有特定问题或场景需要指导
     阅读时间: 20-30分钟
     何时使用: 需要解决特定问题、定制配置

────────────────────────────────────────────────────────────────────────────

【第五步】- 完整深度参考 (适合深度学习)
────────────────────────────────────────────────────────────────────────────
  📚 CONFIGURATION_ALIGNMENT.md (21K, 338行)
  
     用途: 最详细的配置完整参考手册
     内容:
       • 12个完整章节，涵盖所有配置模块
       • 每个参数完整信息:
         - 参数名
         - 预训练值
         - config_8k_telephone 值
         - stage1_encoder_adapt 值
         - 修改原因和说明
       • 四个标记体系 (🔵🟡🟠⚪) 明确状态
       • 网格表格格式，完整映射所有参数
       • 分类统计和参数源说明
       • 深度讲解为什么这样改
       • 使用指南
     
     适合: 深度理解配置、学习每个参数的作用
     阅读时间: 30-40分钟
     何时使用: 学习或定制配置时的参考手册

────────────────────────────────────────────────────────────────────────────

🎯 快速决策树
================================================================================

我想... 应该读哪个文档?

1. 快速了解什么改了？
   → QUICK_CONFIG_DIFF.md (5分钟)

2. 查找特定参数的改动？
   → CONFIG_COMPARISON_TABLE.md (表格快速查询)

3. 我遇到了训练问题？
   → CONFIG_ALIGNMENT_GUIDE.md (按场景查找解决方案)

4. 我想完全理解所有参数？
   → CONFIGURATION_ALIGNMENT.md (深度学习手册)

5. 我不知道从哪里开始？
   → README_CONFIG.md (导航指南)

6. 我要修改学习率或超参数？
   → CONFIG_COMPARISON_TABLE.md + QUICK_CONFIG_DIFF.md

7. 我要定制化配置？
   → 完整读 CONFIG_ALIGNMENT_GUIDE.md + CONFIGURATION_ALIGNMENT.md

8. 训练前最后检查？
   → CONFIG_COMPARISON_TABLE.md 的"配置验证清单"或 
      CONFIG_ALIGNMENT_GUIDE.md 的"训练前检查清单"

================================================================================

📋 文档统计
================================================================================

总大小:     ~62KB
总行数:     ~1,400 行
覆盖参数:   所有配置参数（预训练 + 微调）
标记体系:   🔴CRITICAL(关键改动) 🟡MODIFIED(重要改动) 
           🟠NEW(新增) 🟢ALIGNED(保持一致) ⚪OMITTED(使用默认)
表格数量:   15+ 个详细对比表
检查清单:   3 个独立的检查清单（7项、10项、可视化）
场景导航:   5 个详细的场景指南
常见问题:   20+ 个常见问题与答案

================================================================================

🚀 立即开始
================================================================================

【最快方式】(15分钟)
1. 读 README_CONFIG.md
2. 读 QUICK_CONFIG_DIFF.md 前 3 节
3. 跑 7 步检查清单
4. 开始训练

【标准方式】(45分钟)
1. 读 CONFIG_ALIGNMENT_GUIDE.md
2. 读 QUICK_CONFIG_DIFF.md
3. 读 CONFIG_COMPARISON_TABLE.md
4. 根据需要参考 CONFIGURATION_ALIGNMENT.md

【深度学习】(2小时)
按顺序读完所有 5 份文档，了解完整细节

================================================================================

🔑 核心要点速记
================================================================================

记住这 3 个关键改动，就能理解 80% 的配置改变：

1. Encoder 变为可训练
   audio_encoder_conf.freeze: true → false
   → 让编码器适应 8kHz 频谱

2. 学习率提升 10-20 倍
   optim_conf.lr: 5e-6 → 5e-5 (or 1e-4)
   → 预训练 LR 太小，微调需要更高学习率

3. DeepSpeed 关闭
   train_conf.use_deepspeed: true → false
   → 单 GPU 微调，不需要分布式训练

其他重要改动：
• weight_decay: 0.0 → 0.01 (防止过拟合)
• SpecAugmentation: 新增 (数据增强)
• max_epoch: 2 → 10-20 (更多训练轮数)

================================================================================

📞 需要帮助?
================================================================================

常见问题快速回答：

Q: 学习率 5e-5 合适吗？
A: 这是安全起点。如果 loss 不下降，试试 1e-4。
   如果不稳定，降到 2e-5。

Q: 为什么 Stage1 用 8kHz 而 main 用 16kHz？
A: 不同策略。Stage1 让 encoder 学习 8kHz；
   main 用上采样使用标准 16kHz 处理链。

Q: 能否跳过 SpecAugmentation？
A: 不建议。SpecAug 是 8kHz 微调的关键部分。

Q: 应该用哪个 config？
A: 大多数情况用 config_8k_telephone.yaml。
   只有需要特别 8kHz 适应时才用 stage1_encoder_adapt.yaml。

更多问题请查看各文档的 FAQ 部分。

================================================================================

📝 版本信息
================================================================================

创建日期:    2025-01-05
更新频率:    根据配置变更
版本号:      1.0
参考模型:    Fun-ASR-Nano-2512
参考配置:    /gpfs01/nfs_share/finrc/liangguang/cache/modelscope/models/
             FunAudioLLM/Fun-ASR-Nano-2512/config.yaml

================================================================================

✨ 下一步
================================================================================

→ 打开 README_CONFIG.md 开始
→ 或直接读 QUICK_CONFIG_DIFF.md 看关键改动
→ 或跳到 CONFIG_COMPARISON_TABLE.md 的检查清单

祝训练顺利！ 🎉

================================================================================
